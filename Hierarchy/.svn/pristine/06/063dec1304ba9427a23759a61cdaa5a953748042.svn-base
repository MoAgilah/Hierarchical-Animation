#ifndef BulletH
#define BulletH

#include "Application.h"

__declspec(align(16)) class Bullet
{
public:
	Bullet(CommonMesh* p_Bullet);
	~Bullet();
	void Activate(const XMMATRIX& gunMatrix);
	void Deactivate();
	bool Update(const double& deltaTime);
	void Draw(void);
	bool GetActive(void) const;
	Bullet* getNext() const;
	void setNext(Bullet* n);
private:
	void UpdateMatrices(void);
	CommonMesh* p_Bullet;

	bool p_active;

	double timer;

	XMFLOAT4 m_v4Rot;
	XMFLOAT4 m_v4Pos;

	XMVECTOR m_vForwardVector;
	XMVECTOR gravity;
	float m_fSpeed;

	XMMATRIX m_mWorldMatrix;	
	XMMATRIX gunMatrix;
	Bullet* next;
public:
	void* operator new(size_t i)
	{
		return _mm_malloc(i, 16);
	}

		void operator delete(void* p)
	{
		_mm_free(p);
	}
};

#endif